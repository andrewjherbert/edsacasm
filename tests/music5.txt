; FUNCTION TEST - Sound Loops
; Andrew/Tony Dec. 2012
; 14 Jan 2022 music5 - slower changes with 5000 in the accumulator

; Loop continuously changing the internal loop timing 3 times
; Connect the speaker to the 'E' decode


.START.    T .ZERO. D     ; Clear Accumulator
           A .COUNT.  D   ; Load acc with the value in COUNT
.LOOP1.    S .ONE. D	 ;subtract 1 from acc
	  G ;+2 F      	; Jump out of loop if acc <0
	  E .LOOP1. F	; else loop
           A .COUNT.  D   ; Load acc with the value in COUNT
.LOOP2.    S .ONE. D	 ;subtract 1 from acc
	  G ;+3 F      	; Jump out of loop if acc <0
	  X 1 F		;loop padding and label 1 for Logic Analyser
	  E .LOOP2. F	; else loop
           A .COUNT.  D   ; Load acc with the value in COUNT
.LOOP3.    S .ONE. D	 ;subtract 1 from acc
	  G .START. F    ; Jump back to start if acc <0
	  X 2 F		;loop padding and label 2 for LA
	  X 3 F		;loop padding and label 3 for LA
	  E .LOOP3. F	; else loop
	  Z 1 F		; a couple of stop orders in case something goes wrong
	  Z 2 F

@
.ZERO.     +0L
.COUNT.    +5000L
.ONE.      +1L

